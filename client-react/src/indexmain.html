<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุดุจูโุณุงุฒ ูููุชุงฺ ู ูุฒฺฉ ุฎูุฏุฑู</title>
    
    <link rel="stylesheet" href="CarPhysicsLib.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>   
    <style>
        /* ุงุณุชุงูโูุง Ports ุจุฑุง ุงุชุตุงู (ูุณุชููุงู ุฏุฑ HTML ูุฑุงุฑ ุฏุงุฏู ุดุฏ) */
        .port { width: 10px; height: 10px; border-radius: 50%; background-color: #4CC9F0; position: absolute; cursor: crosshair; z-index: 100; border: 2px solid #151922; }
        .port.input { left: -5px; top: 50%; transform: translateY(-50%); }
        .port.output { right: -5px; top: 50%; transform: translateY(-50%); }
        .port.highlight { background-color: #F72585; box-shadow: 0 0 8px #F72585; }
    </style>
    <script type="module" src="CarPhysicsLib.js"></script>
    <script type="module" src="assembly-logic.js"></script>
</head>
<body>

    <div class="simulator">
        
        <div class="panel toolbar-panel">
            <h2>โ๏ธ ุงูุจุงุฑ ูุทุนุงุช</h2>
            <p class="section-desc">ุจุฑุง ูููุชุงฺุ ูุทุนุงุช ุฑุง ุจู ูุงุญู ฺฉุงุฑ ุจฺฉุดุฏ.</p>
            
	<div class="inventory-list">
  	  <div class="node inventory-node draggable-part" 
      	   draggable="true" 
      	   data-part-type="powertrain" 
         data-config='{"type": "EV", "maxPowerKW": 150, "maxTorqueNM": 300}'>
     	   <div class="node-header">
     	       <span class="node-title">ููุชูุฑ ุจุฑู (EV)</span>
     	       <span class="icon">๐</span>
    	    </div>
  	  </div>
    	
   	 <div class="node inventory-node draggable-part" 
     	    draggable="true" 
     	    data-part-type="battery" 
    	     data-config='{"type": "Standard", "capacityKWh": 60, "mass": 450}'>
   	     <div class="node-header">
    	        <span class="node-title">ุจุงุทุฑ ุงุณุชุงูุฏุงุฑุฏ</span>
    	        <span class="icon">โก</span>
   	     </div>
   	 </div>
   	 <div class="node inventory-node draggable-part" 
      	   draggable="true" 
       	    data-part-type="powertrain" 
     	    data-config='{"type": "ICE", "maxRPM": 6500, "maxTorqueNm": 250, "ratios": [3.5, 2.0, 1.3, 1.0, 0.8]}'>
       	 <div class="node-header">
     	       <span class="node-title">ููุชูุฑ ุจูุฒู (ICE)</span>
     	       <span class="icon">โฝ</span>
    	    </div>
  	  </div>
	
   	 <div class="node inventory-node draggable-part" 
       	  draggable="true" 
       	  data-part-type="wheel" 
      	   data-config='{"type": "Sport", "radius": 0.32, "width": 0.2, "inertia": 1.5}'>
     	   <div class="node-header">
        	    <span class="node-title">ฺุฑุฎ ู ุชุงุฑ ุงุณูพุฑุช</span>
        	    <span class="icon">โญ</span>
     	   </div>
  	  </div>
		
 		   <div class="node inventory-node draggable-part" 
   	      draggable="true" 
     	    data-part-type="body" 
    	     data-config='{"type": "Coupe", "wheelbase": 2.7, "mass": 400, "dragCoefficient": 0.28, "frontalArea": 2.2}'>
    	    <div class="node-header">
     	       <span class="node-title">ุจุฏูู ู ุดุงุณ ฺฉููพู</span>
     	       <span class="icon">๐</span>
    	    </div>
  	  </div>
	</div>

        <div class="canvas" id="assembly-canvas">
<h2 class="canvas-title">๐๏ธ ูุงุญู ูููุชุงฺ</h2>
<svg id="connection-svg" class="connection-layer"></svg>

<div class="drop-zones-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 50%; z-index: 101; pointer-events: none;">
    
    <div class="drop-zone" data-part-type="body" 
         style="position: absolute; right: 30%; top: 20%; width: 200px; height: 80px; border: 2px dashed #4CC9F0; color: #b0b0b0; display: flex; align-items: center; justify-content: center; background: rgba(0, 0, 0, 0.2); border-radius: 8px; pointer-events: all; cursor: drop;">
        ูุญู ูุตุจ ุจุฏูู/ุดุงุณ
    </div>
    
    <div class="drop-zone" data-part-type="powertrain" 
         style="position: absolute; right: 20%; top: 60%; width: 150px; height: 50px; border: 2px dashed #F72585; color: #b0b0b0; display: flex; align-items: center; justify-content: center; background: rgba(0, 0, 0, 0.2); border-radius: 8px; pointer-events: all; cursor: drop;">
        ูุญู ูุตุจ ูพุดุฑุงูู
    </div>
    
    <div class="drop-zone" data-part-type="battery" 
         style="position: absolute; right: 40%; top: 75%; width: 200px; height: 50px; border: 2px dashed #3A0CA3; color: #b0b0b0; display: flex; align-items: center; justify-content: center; background: rgba(0, 0, 0, 0.2); border-radius: 8px; pointer-events: all; cursor: drop;">
        ูุญู ูุตุจ ุจุงุชุฑ
    </div>
    
    <div class="drop-zone" data-part-type="wheel" 
         style="position: absolute; left: 15%; top: 40%; width: 120px; height: 40px; border: 2px dashed #43AA8B; color: #b0b0b0; display: flex; align-items: center; justify-content: center; background: rgba(0, 0, 0, 0.2); border-radius: 8px; pointer-events: all; cursor: drop;">
        ูุญู ูุตุจ ฺุฑุฎ
    </div>
</div>
<div id="render-3d-output" class="render-3d-output"></div>
        </div>

        <div class="panel settings-panel">
            <h2>๐ ุฎุฑูุฌ ุดุจูโุณุงุฒ</h2>
            
            <button id="start-simulation" class="btn primary-btn">ุดุฑูุน ุดุจูโุณุงุฒ</button>
            <hr>
            
            <div id="physics-output">
                <p><strong>ูุถุนุช:</strong> <span id="status-out" style="color: #4CC9F0;">ุขูุงุฏู ูููุชุงฺ</span></p>
                <p><strong>ุณุฑุนุช (km/h):</strong> <span id="speed-out">0.0</span></p>
                <p><strong>ุดุชุงุจ (m/sยฒ):</strong> <span id="accel-out">0.00</span></p>
                <p><strong>ุดุงุฑฺ ุจุงุชุฑ (kWh):</strong> <span id="charge-out">--</span></p>
                
                <hr>
                
                <h3>ฺฉูุชุฑูโูุง:</h3>
                <label for="throttle-input">ุฏุฑฺู ฺฏุงุฒ:</label>
                <input type="range" id="throttle-input" min="0" max="1" step="0.01" value="0" disabled>
                <label for="brake-input">ุชุฑูุฒ:</label>
                <input type="range" id="brake-input" min="0" max="1" step="0.01" value="0" disabled>
            </div>
        </div>
        
    </div>
</body>
</html>